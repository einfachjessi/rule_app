<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{{ header.law_topic }}</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
        <h1>{{ header.law_topic }}</h1>
        <p class="description">{{ header.description }}</p>

    <div class="questionbox">  
    {% if not result_page %}
        <div class="question">
            <form method="POST" action="{{ url_for('index') }}">
                <p><strong>{{ question.question_text }}</strong></p>
                {% if question.question_legal_basis %}
                    <p>Legal basis: {{ question.question_legal_basis }} (<a href="{{ question.question_legal_basis_url }}" target="_blank">Read more</a>)</p> 
                {% endif %}

                {% for choice, data in question.choices.items() %}
                    <div>
                        <input type="radio" id="{{ choice }}" name="choice" value="{{ choice }}" required>
                        <label for="{{ choice }}">{{ choice }}</label>
                    </div>
                {% endfor %}

                <input type="hidden" name="question_id" value="{{ question_id }}">
                <input type="hidden" name="next_question" value="{{ question_id }}">
                <button type="submit">Next</button>
            </form>
        </div>

    {% else %} 
        <div class="result-page">
            <h2>Result</h2>
            {% if legal_reasons %}
                {% for reason in legal_reasons %}
                    <div class="reason">
                        <p>{{ reason.text }}</p>
                        {% if reason.url %}
                            <p><a href="{{ reason.url }}" target="_blank">Read more</a></p>
                        {% endif %}
                    </div>
                {% endfor %}
            {% else %}
                <p>No legal reasons found. (should not happen)</p>
            {% endif %}

            {% if answers %}
                <div class="answers">
                    <h3>History</h3>
                    <ul>
                        {% for question_id, choice in answers.items() %}
                            <li>
                                <strong>{{question_id}}: {{ questions[question_id].question_text }}</strong><br>â†’ {{ choice }}
                                {% if questions[question_id].question_legal_basis_url %}
                                    (<a href="{{ questions[question_id].question_legal_basis_url }}" target="_blank">{{ questions[question_id].question_legal_basis }}</a>)
                                {% endif %}
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}

            <a href="{{ url_for('restart') }}">Start over</a>
        </div>
    {% endif %}
    </div>
</body>
</html>
